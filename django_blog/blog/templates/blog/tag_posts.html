<!-- blog/templates/blog/tag_posts.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Posts Tagged with {{ tag_name }}</title>
</head>
<body>
    <h2>Posts Tagged with "{{ tag_name }}"</h2>
    {% if posts %}
        {% for post in posts %}
            <h3><a href="{% url 'post-detail' post.pk %}">{{ post.title }}</a></h3>
            <p>By {{ post.author.username }} on {{ post.published_date|date:"F d, Y" }}</p>
            <p>{{ post.content|truncatewords:30 }}</p>
            <p>
                <strong>Tags:</strong>
                {% if post.tags.all %}
                    {% for tag in post.tags.all %}
                        <a href="{% url 'tag-posts' tag.name %}">{{ tag.name }}</a>{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                {% else %}
                    No tags.
                {% endif %}
            </p>
            <hr>
        {% endfor %}
    {% else %}
        <p>No posts found for tag "{{ tag_name }}".</p>
    {% endif %}
    <a href="{% url 'post-list' %}">Back to All Posts</a>
</body>
</html>